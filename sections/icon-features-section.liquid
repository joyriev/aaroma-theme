{% schema %}
{
  "name": "Icon Features Section",
  "settings": [
    {
        "type": "color",
        "id": "bgcolor",
        "label": "Section Background Color",
        "default": "#f5eee7"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Selecting your scent has never been easier or more affordable"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Feature Title"
        }
      ]
    }
  ],
  "max_blocks": 7,
  "presets": [
    {
      "name": "Icon Features",
      "category": "Custom",
      "blocks": [
        { "type": "feature", "settings": { "title": "Feature 1" } },
        { "type": "feature", "settings": { "title": "Feature 2" } },
        { "type": "feature", "settings": { "title": "Feature 3" } },
        { "type": "feature", "settings": { "title": "Feature 4" } },
        { "type": "feature", "settings": { "title": "Feature 5" } },
        { "type": "feature", "settings": { "title": "Feature 6" } }
      ]
    }
  ]
}
{% endschema %}

<div class="icon-section__{{ section.id }}">
    <div class="icon-features-section page-width">
    {% if section.settings.heading != blank %}
        <h2 class="icon-features-heading">{{ section.settings.heading }}</h2>
    {% endif %}
    <div class="traits__header--bottom"><span></span></div>
    <div class="icon-features-grid">
        {% assign total_blocks = section.blocks.size %}
        {% assign max_items = 6 %}
        {% assign start_index = total_blocks | plus: 1 %}

        {%- comment -%} Render actual blocks {%- endcomment -%}
        {% for block in section.blocks %}
        <div class="icon-feature-item">
            {% if block.settings.icon != blank %}
            {{ block.settings.icon | image_url: width: 80, height: 80 | image_tag: class: 'icon-feature-icon' }}
            {% else %}
            {{ 'image' | placeholder_svg_tag: 'icon-feature-icon' }}
            {% endif %}
            <p class="icon-feature-title">
            {{ block.settings.title | default: "Feature " }}
            </p>
        </div>
        {% endfor %}

        {%- comment -%} Add placeholders until we reach 6 {%- endcomment -%}
        {% for i in (start_index..max_items) %}
        <div class="icon-feature-item">
            {{ 'image' | placeholder_svg_tag: 'icon-feature-icon' }}
            <p class="icon-feature-title">Feature {{ i }}</p>
        </div>
        {% endfor %}
    </div>
    </div>
</div>



<style>
.icon-section__{{ section.id }} {
  background :{{ section.settings.bgcolor }};
}
.icon-features-section {
  text-align: center;
  padding: 40px 20px;
}
.traits__header--bottom {
    height: 2px;
    background-color: #48373552;
    width: 100%;
    margin: 32px auto;
    width: 120px;
}
.icon-features-heading {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 30px;
}

/* Grid responsive layout */
.icon-features-grid {
  display: grid;
  gap: 25px;
  justify-items: center;
}

/* Mobile & Tablet (3 columns) */
@media (max-width: 1024px) {
  .icon-features-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 767px) {
  .icon-features-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  .shopify-section .icon-features-section{
  padding-left:20px;
  padding-right:20px;
}
.traits__header--bottom {
  display: none;
}
}


/* Desktop (6 columns) */
@media (min-width: 1025px) {
  .icon-features-grid {
    grid-template-columns: repeat(6, 1fr);
  }
}

.icon-feature-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.icon-feature-icon {
  height: auto;
  margin-bottom: 10px;
}

.icon-feature-title {
  font-size: 16px;
  color: #483735;
  letter-spacing: 1px;
  font-weight: 500;
  font-family: DM Mono;
  text-transform: uppercase;
}
</style>
